(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a(67)},33:function(e,t,a){},64:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=(a(33),a(27)),c=a.n(s),o=a(15),i=a(5),l=a(6),m=a(8),u=a(7),d=a(9),E=a(71),p=a(72),h=a(68),S=a(30),N=a(12),f=a.n(N),v=a(17),g=a(70),w=a(1),O=a.n(w),b=a(43),T=r.a.createContext({errors:"",success:"",isAuthenticated:!1,handleLogin:function(){},handleSignup:function(){},handleLogout:function(){}}),I=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.news,t=this.context.isAuthenticated;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(r.a.Fragment,null,e?r.a.createElement("li",null,r.a.createElement("div",{className:"card each-list"},r.a.createElement("div",{className:"news-content",onClick:function(){return window.location.href=e.url}},r.a.createElement("div",{className:"newsAuthor"},"author:",r.a.createElement("span",{className:"authorName"}," ",e.by)),r.a.createElement("span",{className:"newsSpan"},e.title),r.a.createElement("span",{className:"created-date "},"createdAt: ",new Date(e.time).toLocaleString())),r.a.createElement("div",{className:"link-to-comments clearfix"},r.a.createElement(b.a,{to:{pathname:"/news/".concat(e.id),state:{data:this.props,isAuthenticated:t}}},"comments",e.kids?r.a.createElement("span",{className:"new badge blue"},e.kids.length):r.a.createElement("span",{className:"new badge blue"},"0"))))):r.a.createElement("div",{className:"progress progress-bar"},r.a.createElement("div",{className:"indeterminate"}))):r.a.createElement(g.a,{to:"/login"}))}}]),t}(r.a.PureComponent);I.contextType=T,I.porpTypes={news:O.a.object.isRequired,isAuthenticated:O.a.bool.isRequired};var y=I,j={LOGINSIGNUP:"/login",NEWNEWSSTORIES:"/",COMMENTS:"/news/:id",TOPNEWSSTORIES:"/topstories",BESTNEWSSTORIES:"/beststories"},x=a(28),R=a.n(x).a.create({baseURL:"https://hacker-news.firebaseio.com/v0"}),C={COMMENTS:"/item",NEWSTORIES:"/newstories.json",TOPSTORIES:"/topstories.json",BESTSTORIES:"/beststories.json"};function k(e,t,a){return P.apply(this,arguments)}function P(){return(P=Object(v.a)(f.a.mark(function e(t,a,n){var r,s,c,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=M(t),a||n){e.next=8;break}return e.next=4,R.get(r);case 4:return s=e.sent,e.abrupt("return",s.data);case 8:if(!a||n){e.next=15;break}return e.next=11,R.get("/item/".concat(a,".json"));case 11:return c=e.sent,e.abrupt("return",c);case 15:if(a||!n){e.next=20;break}return e.next=18,R.get("".concat(C.COMMENTS,"/").concat(n,".json"));case 18:return o=e.sent,e.abrupt("return",Promise.resolve(o));case 20:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var M=function(e){switch(e){case"newnews":return C.NEWSTORIES;case"topnews":return C.TOPSTORIES;case"bestnews":return C.BESTSTORIES;case"comments":return C.COMMENTS;default:return C.NEWSTORIES}},_=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).fetchNewsStories=Object(v.a)(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.checkRoutes();case 2:if(t=e.sent,a.setState({newsType:t,isLoading:!0}),!a.state.isLoading){e.next=11;break}return e.next=7,k(a.state.newsType);case 7:n=e.sent,r=n.length/10,a.setState({newsStoriesIds:n,maxNewsItems:r}),a.loadNewsFromIds();case 11:case"end":return e.stop()}},e,this)})),a.loadNewsFromIds=function(){var e=a.state,t=e.newsPerPage,n=e.currentPage;a.setState({newsStories:[]});for(var r=n*t,s=r;s<r+t;s++){k(a.state.newsType,a.state.newsStoriesIds[s]).then(function(e){var t=e.data;return a.setState({newsStories:[].concat(Object(S.a)(a.state.newsStories),[t])})}).catch(function(e){return e})}},a.checkRoutes=function(){switch(a.props.location.pathname){case j.NEWNEWSSTORIES:return"newnews";case j.TOPNEWSSTORIES:return"topnews";case j.BESTNEWSSTORIES:return"bestnews";default:return"newnews"}},a.handleUpdate=function(e){a.setState({currentPage:a.state.currentPage+e}),a.loadNewsFromIds()},a.state={newsType:"",currentPage:0,newsStories:[],goToNextPage:1,maxNewsItems:0,newsPerPage:10,isLoading:!1,newsStoriesIds:[],goToPreviousPage:-1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchNewsStories()}},{key:"componentWillUnmount",value:function(){this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.maxNewsItems,n=t.newsStories,s=t.goToNextPage,c=t.goToPreviousPage,o=t.currentPage,i=this.context.isAuthenticated;return r.a.createElement(r.a.Fragment,null,i?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container local-container list-container"},r.a.createElement("ul",null,n.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(y,{news:t,index:a,newsType:e.state.newsType}))}))),r.a.createElement("div",{className:"news-pagination"},r.a.createElement("button",{disabled:0===o||o<0,onClick:function(){return e.handleUpdate(c)},className:"btn-floating btn-large waves-effect waves-light previous-page"},r.a.createElement("i",{className:"fas fa-chevron-left"})),r.a.createElement("button",{disabled:o>=a-1,onClick:function(){return e.handleUpdate(s)},className:"btn-floating btn-large waves-effect waves-light next-page"},r.a.createElement("i",{className:"fas fa-chevron-right"})))):r.a.createElement(g.a,{to:j.LOGINSIGNUP}))}}]),t}(r.a.PureComponent);_.contextType=T;var A=_,W=a(16),L={SIGNUP_ERROR:"Please sign-up to login",EMPTY_INPUT_FIELDS:"Check your inputs.",PASSWORD_MISMATCH_ERROR:"Please check your password.",USERNAME_MISMATCH_ERROR:"Please check your user name."},U="404 not found",F={COMMENTS_NOT_FOUND:"no comments to display",CHILD_COMMENTS_NOT_FOUND:"no commentsChilds to display"},D={SIGNUP_SUCCESS_MESSAGE:"You have sign up now you can login."},G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleInputChange=function(e){a.setState(Object(W.a)({},e.target.name,e.target.value))},a.handleFormDataSubmit=function(e){e.preventDefault();var t=a.state,n=t.userName,r=t.password;if(n&&r){var s={userName:n,password:r};"signup"===e.target.name?a.context.handleSignup(s):a.context.handleLogin(s)}else a.setState({errors:L.EMPTY_INPUT_FIELDS})},a.state={errors:"",password:"",userName:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.errors,t=this.context,a=t.isAuthenticated,n=t.errors,s=t.success;return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(g.a,{to:j.NEWNEWSSTORIES}):r.a.createElement("div",{className:"conteiner local-container"},r.a.createElement("div",{className:"row form-row"},r.a.createElement("div",{className:"login-header"},"Login"),r.a.createElement("form",{className:"col s12 form-holder"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("i",{className:"material-icons prefix"},"account_circle"),r.a.createElement("input",{id:"icon_prefix",type:"text",className:"validate",name:"userName",onChange:this.handleInputChange}),r.a.createElement("label",{htmlFor:"icon_prefix"},"User Name")),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("i",{className:"material-icons prefix"},"security"),r.a.createElement("input",{id:"icon_telephone",type:"password",className:"validate",name:"password",onChange:this.handleInputChange}),r.a.createElement("label",{htmlFor:"icon_telephone"},"Password"))),r.a.createElement("div",{className:"btn-container"},r.a.createElement("input",{className:"btn waves-effect waves-light login-page-buttons",type:"button",name:"login",value:"login",onClick:this.handleFormDataSubmit}),r.a.createElement("input",{className:"btn waves-effect waves-light login-page-buttons",type:"button",name:"signup",value:"signup",onClick:this.handleFormDataSubmit}))),r.a.createElement("div",{className:"invalid errors"},e||n||s))))}}]),t}(r.a.Component);G.contextType=T;var B=G,H=a(69),q=[{to:j.NEWNEWSSTORIES,name:"New Stories"},{to:j.BESTNEWSSTORIES,name:"Best Stories"},{to:j.TOPNEWSSTORIES,name:"Top Stories"}],J=function(){return r.a.createElement("div",{className:"container local-container"},r.a.createElement("nav",{className:"nav-extended"},r.a.createElement("div",{className:"nav-content"},r.a.createElement("ul",{className:"tabs tabs-transparent"},q.map(function(e){return r.a.createElement(H.a,{exact:!0,activeClassName:"activeNavBar",className:"tab nav-tabs",to:e.to,key:e.to},e.name)})))))},Y=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.context.handleLogout;return r.a.createElement("div",{className:"container app-header local-container clearfix"},r.a.createElement("span",{className:"header"},"Hacker News"),r.a.createElement("span",{className:"logout",onClick:e},r.a.createElement("i",{className:"fas fa-sign-out-alt"})))}}]),t}(r.a.Component);Y.contextType=T;var $=Y,z=(a(64),a(20)),K=a.n(z),Q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){var e=a.props.data;e?k(a.state.newsType,e).then(function(e){var t=e.data;return a.setState(Object(o.a)({},a.state.commentsChild,{commentsChild:t}))}).catch(function(e){return e}):a.setState({errors:F.CHILD_COMMENTS_NOT_FOUND})},a.state={commentsChild:null,newsType:"comments"},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.commentsChild,t=this.context.isAuthenticated;return r.a.createElement(r.a.Fragment,null,t?e?r.a.createElement("div",null,r.a.createElement("li",{className:"comment-list",key:e.id},r.a.createElement("div",{className:"newsAuthor"},"author:",r.a.createElement("span",{className:"authorName"}," ",e.by)),r.a.createElement("span",{className:"newsSpan"},e.text),r.a.createElement("span",{className:"created-date "},"createdAt: ",new Date(e.time).toLocaleString()),r.a.createElement("div",{className:"child-comment"},r.a.createElement(te,{data:e.kids})))):r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"preloader-wrapper active"},r.a.createElement("div",{className:"spinner-layer spinner-red-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))):r.a.createElement(K.a,{to:"/login"}))}}]),t}(r.a.Component);Q.contextType=T,Q.porpTypes={commentsChild:O.a.object.isRequired};var V=Q,X=a(29),Z=a.n(X),ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={errors:"",comments:[],newsType:"comments"},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.context.isAuthenticated,t=this.props.history?this.props.history.location.state.data.news.kids:this.props.data;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement("div",{className:"container local-container list-container"},t?r.a.createElement("ul",null,t.map(function(e){return r.a.createElement(V,{data:e,key:e.id})})):r.a.createElement("div",null,F.COMMENTS_NOT_FOUND)):r.a.createElement(Z.a,{to:"/login"}))}}]),t}(r.a.Component);ee.contextType=T,ee.porpTypes={props:O.a.object.isRequired};var te=ee,ae=function(){return r.a.createElement("div",null,U)},ne="loginCredentials",re="isAuthenticated",se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleLogin=function(e){var t=JSON.parse(localStorage.getItem(ne));if(t){if(t.userName!==e.userName)a.setState({errors:L.USERNAME_MISMATCH_ERROR});else if(t.password!==e.password)a.setState({errors:L.PASSWORD_MISMATCH_ERROR});else if(t.userName===e.userName&&t.password===e.password)return a.setState({isAuthenticated:!0}),sessionStorage.setItem(re,!0),!0}else a.setState({errors:L.SIGNUP_ERROR})},a.handleSignup=function(e){if(e)return localStorage.setItem(ne,JSON.stringify(e)),a.setState({success:D.SIGNUP_SUCCESS_MESSAGE}),!0},a.handleLogout=function(){a.setState({isAuthenticated:!1}),sessionStorage.setItem("isAuthenticated",!1)},a.state={errors:"",success:"",isAuthenticated:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isAuthenticated,a=e.errors,n=e.success;return r.a.createElement(T.Provider,{value:{errors:a,success:n,isAuthenticated:t,handleLogin:this.handleLogin,handleSignup:this.handleSignup,handleLogout:this.handleLogout}},r.a.createElement(E.a,{basename:"/hackernews"},r.a.createElement("div",null,t&&r.a.createElement("div",{className:"header-container"},r.a.createElement($,null),r.a.createElement(J,null)),r.a.createElement(p.a,null,r.a.createElement(h.a,{path:j.LOGINSIGNUP,exact:!0,component:function(e){return r.a.createElement(B,e)}}),r.a.createElement(h.a,{path:j.NEWNEWSSTORIES,exact:!0,component:function(e){return r.a.createElement(A,e)}}),r.a.createElement(h.a,{path:j.TOPNEWSSTORIES,exact:!0,component:function(e){return r.a.createElement(A,e)}}),r.a.createElement(h.a,{path:j.BESTNEWSSTORIES,exact:!0,component:function(e){return r.a.createElement(A,e)}}),r.a.createElement(h.a,{path:j.COMMENTS,exact:!0,component:function(e){return r.a.createElement(te,e)}}),r.a.createElement(h.a,{component:function(e){return r.a.createElement(ae,e)}})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Object(o.a)({},t,{isAuthenticated:"true"===sessionStorage.getItem(re)})}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,2,1]]]);
//# sourceMappingURL=main.3a788c4a.chunk.js.map